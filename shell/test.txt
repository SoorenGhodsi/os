python3 shell_test.py
Sanitizer output (main process) for test fork fails:
  ==3241477==LeakSanitizer has encountered a fatal error.
  ==3241477==HINT: For debugging, try setting environment variable LSAN_OPTIONS=verbosity=1:log_threads=1
  ==3241477==HINT: LeakSanitizer does not work under ptrace (strace, gdb, etc)


Failed test 'fork fails in a pipeline'
Test input:
  /bin/cat | /bin/cat | /bin/cat | /bin/cat
  exit
Actual stdout:
  > /bin/cat exit status: 0
  /bin/cat exit status: 0
  /bin/cat exit status: 0
  /bin/cat exit status: 0
  > 
Actual stderr:
  
Sanitizer output (main process):
  ==3243485==LeakSanitizer has encountered a fatal error.
  ==3243485==HINT: For debugging, try setting environment variable LSAN_OPTIONS=verbosity=1:log_threads=1
  ==3243485==HINT: LeakSanitizer does not work under ptrace (strace, gdb, etc)
Expected stdout regular expression pattern:
  > > 
Expected stderr regular expression pattern: (extra lines allowed)
  .+
(This test also has some important extra setup code that might do something like restrict the number of file descriptors or child processes that can be created.)
Errors:
  in stdout: could not find a match for pattern [> > ] in line [> /bin/cat exit status: 0]
  in stdout: could not find a match for pattern [> > ] in line [/bin/cat exit status: 0]
  in stdout: could not find a match for pattern [> > ] in line [/bin/cat exit status: 0]
  in stdout: could not find a match for pattern [> > ] in line [/bin/cat exit status: 0]
  in stdout: could not find a match for pattern [> > ] in line [> ]
  [plus 2 more lines, not shown]





Failed test 'large amount of data through pipe'
Test input:
  /bin/head -c 1048576 /dev/zero | /bin/cat | /usr/bin/wc -c
  exit
Actual stdout:
  
Actual stderr:
  <error output not available>
Expected stdout regular expression pattern: (extra lines allowed)
  .*1048576.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  timed out after 30 seconds
  in stdout: could not find match for pattern [.*1048576.*] in []
  in stderr: unexpected extra output [['<error output not available>']]



86 tests passed and 2 tests failed.
---
Note on interpreting test output patterns:
All expected values matched against a "regular expression" where:
    .* means any string (including empty strings)
    .+ means any string (excluding empty strings)
    everything is matched case-insensitively

